set header_cache = "~/.cache/neomutt"

# Personal configuration
source ~/.neomutt/local.rc

# Mail directories
set folder = "~/.mail"
source ~/.neomutt/mailboxes
set spoolfile = "+main/INBOX"
set record = "+main/Sent"
set postponed = "+main/Drafts"
set trash = "+main/Trash"

# Sending
set sendmail = "/usr/bin/msmtp"
set use_from = yes
set use_envelope_from = yes
set reverse_name = yes
set edit_headers = yes
set send_charset = "us-ascii:utf-8"
set attribution = "On %d, %f wrote:"
set date_format = "%a, %-d %b %Y at %T %z"

# PGP
source ~/.neomutt/gpg.rc
#set crypt_autosign = yes

# Contacts
set query_command = "khard email --parsable --search-in-source-files '%s'"
bind editor <Tab> complete-query
bind editor ^T complete
macro index,pager A \
    "<pipe-message>khard add-email<return>" \
    "add the sender email address to khard"
#set reverse_alias = yes

# Archiving
set delete = yes
set confirmappend = no
macro index,pager e \
    "<save-message>=main/Archive<enter>" \
    "archive message"
bind index,pager E edit-or-view-raw-message

# Display
set sort = threads
set sort_aux = reverse-last-date-received
set strict_threads = yes
set pager_index_lines = 8
auto_view text/html
alternative_order text/plain text/html
set print = yes
set print_command = "$PAGER"
set print_split = yes

# UI
set sleep_time = 0
set sidebar_visible = yes
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats = yes
set index_format = "%4C %Z %(%d %b %H:%M) %-15.15L  %s"
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open
bind index,pager B sidebar-toggle-visible
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \Cd next-page
bind attach,index,pager \Cu previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry
bind index,pager a group-reply
macro index i \
    "<change-folder>=main/INBOX<enter>" \
    "go to inbox"

# History
set history = 256
set save_history = 256

# Colours
source ~/.neomutt/colors.linux
