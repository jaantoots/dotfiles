#!/usr/bin/env sh

# Specify emacs binary to be used with fallback
emacs=/usr/bin/emacs
(which brew >/dev/null 2>&1) \
    && [ -f "$(brew --prefix 2>/dev/null)/bin/emacs" ] \
    && emacs=$(brew --prefix)/bin/emacs

# Use 16 colors instead of 256 colors
if [ "$TERM" = "xterm-256color" ]; then
    export TERM=xterm-16color
elif [ "$TERM" = "screen-256color" ]; then
    export TERM=screen-16color
elif [ "$TERM" = "rxvt-256color" ] || [ "$TERM" = "rxvt-unicode-256color" ]; then
    export TERM=rxvt-16color
fi

exec "$emacs" "$@"
